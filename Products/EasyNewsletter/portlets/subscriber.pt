<tal:block i18n:domain="EasyNewsletter">
<dl class="portlet portletNewsletterSubscriber"
  tal:define="portal_url context/@@plone_portal_state/portal_url;
              newsletter_path view/get_newsletter">

    <dt class="portletHeader">
        <span class="portletTopLeft"></span>
        <a tal:attributes="href string: ${portal_url}${newsletter_path}"><span
            tal:content="view/header|nothing">Newsletter</span></a>
        <span class="portletTopRight"></span>
    </dt>

    <dd class="portletItem lastItem">
  	    <p tal:content="view/description|nothing"
            tal:omit-tag="not:view/description"/>

        <form action="@@register-subscriber">
            <input type="hidden"
                   name="newsletter"
                   value="newsletter"
                   tal:attributes="value newsletter_path" />

            <div id="salutation"
              tal:condition="view/data/query_fullname|nothing"
              tal:define="query_firstname view/data/query_firstname|nothing"
              tal:attributes="class python:query_firstname and 'withFirstname' or ''"
              id="salutation"
              name="salutation">
              <input
                  type="radio"
                  name="salutation"
                  value="ms"
                  id="ms">
              <label for="ms" i18n:translate="ms">ms</label>
              <input
                  type="radio"
                  name="salutation"
                  value="mr"
                  id="mr">
              <label for="mr" i18n:translate="mr">mr</label>
            <input class="easynewsletter_text name_prefix"
                   tal:condition="view/data/query_name_prefix|nothing"
                   onclick="this.value=''"
                   name="name_prefix"
                   value="Prefix"
                   i18n:attributes="value easynewsletter_input_value_name_prefix;" /><br>
            <input class="easynewsletter_text firstname"
                   tal:condition="view/data/query_firstname|nothing"
                   onclick="this.value=''"
                   name="firstname"
                   value="First Name"
                   i18n:attributes="value easynewsletter_input_value_firstname;" />
            <input class="easynewsletter_text name"
                   onclick="this.value=''"
                   name="name"
                   value="Name"
                   i18n:attributes="value easynewsletter_input_value_name;" />
            </div>
            <input tal:condition="view/data/query_organization|nothing"
                   class="easynewsletter_text"
                   onclick="this.value=''"
                   name="organization"
                   value="Organization"
                   i18n:attributes="value easynewsletter_input_value_organization;" />

            <input class="easynewsletter_text"
                   onclick="this.value=''"
                   name="subscriber"
                   value="Your email"
                   i18n:attributes="value easynewsletter_input_value;" />

            <input class="standalone easynewsletter_button"
                   type="submit"
                   value="subscribe"
                   i18n:attributes="value easynewsletter_button_label;" />
        </form>

        <span class="portletBottomLeft"></span>
        <span class="portletBottomRight"></span>
    </dd>
    <dd class="portletFooter" tal:condition="view/data/show_unsubscribe|nothing">
      <span class="portletBottomLeft"></span>
      <a tal:attributes="href string:${portal_url}${newsletter_path}/unsubscribe_form"
        i18n:translate="">unsubscribe</a>
      <span class="portletBottomRight"></span>
    </dd>
</dl>
</tal:block>
